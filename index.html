<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Procurement Tracker - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡∏±‡∏î‡∏à‡πâ‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Sarabun:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    <!-- Flatpickr -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/th.js"></script>
    <!-- PDF Lib -->
    <!-- PDF Lib -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="brand">
                <i class="fa-solid fa-cube brand-icon"></i>
                <h1>ProTracker</h1>
            </div>

            <nav class="nav-menu">
                <a href="#" class="nav-item active" data-view="dashboard">
                    <i class="fa-solid fa-chart-pie"></i>
                    <span>‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (Dashboard)</span>
                </a>
                <a href="#" class="nav-item" data-view="projects">
                    <i class="fa-solid fa-list-check"></i>
                    <span>‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                </a>
                <a href="#" class="nav-item" id="nav-settings">
                    <i class="fa-solid fa-cog"></i>
                    <span>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô (Settings)</span>
                </a>
            </nav>

            <!-- Document Number Search -->
            <div class="doc-search-box" style="padding: 0 1rem; margin-top: 1rem;">
                <label style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 4px; display: block;">
                    <i class="fa-solid fa-search"></i> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠
                </label>
                <div style="position: relative;">
                    <input type="text" id="inp-doc-search" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡∏Ç‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô..."
                        style="width: 100%; padding: 8px 10px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--bg-card); color: var(--text-primary); font-size: 0.85rem;">
                    <div id="doc-search-results"
                        style="display: none; position: absolute; left: 0; right: 0; top: calc(100% + 4px); background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; max-height: 260px; overflow-y: auto; z-index: 200; box-shadow: 0 8px 24px rgba(0,0,0,0.3);">
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <button id="btn-create-project" class="btn btn-primary full-width">
                    <i class="fa-solid fa-plus"></i> <span>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="top-bar">
                <div class="page-title" style="display: flex; align-items: center; gap: 15px;">
                    <button id="sidebar-toggle" class="btn-icon"
                        style="color: var(--text-muted); font-size: 1.2rem; cursor: pointer; background: none; border: none;">
                        <i class="fa-solid fa-bars"></i>
                    </button>
                    <h2 id="page-header-title" style="margin: 0;">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°</h2>
                    <span id="current-date" class="date-display">Today</span>
                </div>
                <div class="user-profile">
                    <div class="avatar">
                        <i class="fa-solid fa-user"></i>
                    </div>
                </div>
            </header>

            <!-- Dashboard View -->
            <section id="view-dashboard" class="view-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon icon-blue"><i class="fa-solid fa-folder-open"></i></div>
                        <div class="stat-info">
                            <h3>‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                            <span class="stat-value" id="stat-total">0</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon icon-orange"><i class="fa-solid fa-bars-progress"></i></div>
                        <div class="stat-info">
                            <h3>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</h3>
                            <span class="stat-value" id="stat-progress">0</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon icon-green"><i class="fa-solid fa-check-circle"></i></div>
                        <div class="stat-info">
                            <h3>‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</h3>
                            <span class="stat-value" id="stat-completed">0</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon icon-red"><i class="fa-solid fa-triangle-exclamation"></i></div>
                        <div class="stat-info">
                            <h3>‡πÉ‡∏Å‡∏•‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î</h3>
                            <span class="stat-value" id="stat-urgent">0</span>
                        </div>
                    </div>
                </div>

                <div class="recent-activity">
                    <div class="section-header">
                        <h3><i class="fa-solid fa-clock-rotate-left"></i> ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                    </div>
                    <div id="activity-list" class="activity-list">
                        <!-- Activity items will be injected here -->
                        <div class="empty-state-small">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</div>
                    </div>
                </div>
            </section>

            <!-- Projects List View -->
            <section id="view-projects" class="view-section">
                <div class="projects-controls">
                    <div class="search-box">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" id="search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£...">
                    </div>
                    <div class="filter-box">
                        <select id="filter-status">
                            <option value="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                            <option value="active">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
                            <option value="completed">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option>
                            <option value="urgent">‡πÉ‡∏Å‡∏•‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î (7 ‡∏ß‡∏±‡∏ô)</option>
                        </select>
                    </div>
                </div>

                <div id="projects-grid" class="projects-grid">
                    <!-- Project cards will be injected here -->
                </div>
            </section>

            <!-- Project Detail View (Hidden by default) -->
            <section id="view-detail" class="view-section">
                <div class="detail-header">
                    <button class="btn-back" id="btn-back-projects"><i class="fa-solid fa-arrow-left"></i> ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <div class="detail-actions">
                        <button class="btn btn-outline btn-sm" id="btn-export-pdf" style="margin-right: 0.5rem;">
                            <i class="fa-solid fa-file-pdf"></i> ‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô PDF
                        </button>
                        <button class="btn btn-danger btn-sm" id="btn-delete-project"><i class="fa-solid fa-trash"></i>
                            ‡∏•‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</button>
                    </div>
                </div>

                <div class="project-info-card">
                    <div class="project-title-row">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <h1 id="detail-title">Project Name</h1>
                            <button class="btn-icon btn-sm" id="btn-edit-project-info" title="‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô"><i
                                    class="fa-solid fa-pen"></i></button>
                        </div>
                        <span class="status-badge" id="detail-status">Status</span>
                    </div>
                    <p id="detail-desc" class="project-desc">Description...</p>
                    <div class="project-meta">
                        <span><i class="fa-solid fa-calendar"></i> ‡πÄ‡∏£‡∏¥‡πà‡∏°: <span id="detail-start-date">-</span></span>
                        <span><i class="fa-solid fa-flag"></i> ‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î: <span id="detail-deadline">-</span></span>
                        <span><i class="fa-solid fa-coins"></i> ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì: <span id="detail-budget">-</span></span>
                        <span><i class="fa-solid fa-file-invoice-dollar"></i> ‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤: <span
                                id="detail-contract-amount">-</span></span>
                        <span><i class="fa-solid fa-bolt"></i> ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô: <span id="detail-priority"
                                class="priority-badge">-</span></span>
                        <span><i class="fa-solid fa-tag"></i> ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: <span id="detail-purchase-type"
                                class="priority-badge">-</span></span>
                        <span><i class="fa-solid fa-handshake"></i> ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£: <span id="detail-procurement-method"
                                class="priority-badge">-</span></span>
                    </div>

                    <div class="overall-progress">
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="detail-overall-progress" style="width: 0%"></div>
                        </div>
                        <span class="progress-text">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤ <span id="detail-progress-percent">0%</span></span>
                    </div>
                </div>

                <div class="workflow-container">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <h3 style="margin: 0; font-size: 1rem; color: var(--text-muted);">‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</h3>
                        <button class="btn btn-outline btn-sm" id="btn-edit-project-workflow"
                            style="font-size: 0.75rem; padding: 0.3rem 0.6rem;">
                            <i class="fa-solid fa-gear"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô
                        </button>
                    </div>
                    <div class="workflow-tabs" id="workflow-tabs">
                        <!-- Step tabs generated by JS -->
                    </div>

                    <div class="workflow-content">
                        <div class="step-header">
                            <h2 id="step-title">1. ‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</h2>
                            <!-- Button removed as per request -->
                            <div id="step-info-container"></div>
                        </div>

                        <div class="checklist-section">
                            <h3><i class="fa-solid fa-list-check"></i> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Checklist)</h3>
                            <div class="add-checklist-item">
                                <input type="text" id="new-checklist-input" placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...">
                                <input type="datetime-local" id="new-checklist-deadline" title="‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à (Deadline)"
                                    style="width: auto;">
                                <button id="btn-add-checklist" class="btn btn-icon"><i
                                        class="fa-solid fa-plus"></i></button>
                            </div>
                            <ul id="checklist-items" class="checklist-items">
                                <!-- Checkbox items here -->
                            </ul>
                        </div>

                        <!-- Separate Timeline Section -->
                        <div class="collapsible-section" id="section-timeline">
                            <div class="collapsible-header" id="header-timeline">
                                <h3 style="color: var(--primary-color); margin: 0;">
                                    <i class="fa-solid fa-timeline"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå (Timeline)
                                </h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="collapsible-content">
                                <div class="add-note-box">
                                    <textarea id="timeline-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô..."></textarea>
                                    <div
                                        style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem;">
                                        <div>
                                            <input type="file" id="inp-timeline-file" style="display: none;"
                                                accept="image/*,application/pdf">
                                            <button id="btn-attach-timeline" class="btn btn-outline btn-sm"
                                                title="‡πÅ‡∏ô‡∏ö‡πÑ‡∏ü‡∏•‡πå (‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û/PDF)">
                                                <i class="fa-solid fa-paperclip"></i>
                                            </button>
                                            <span id="timeline-file-name"
                                                style="font-size: 0.8rem; color: var(--text-muted); margin-left: 0.5rem;"></span>
                                        </div>
                                        <button id="btn-add-timeline" class="btn btn-primary btn-sm">
                                            <i class="fa-solid fa-plus"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå
                                        </button>
                                    </div>
                                </div>
                                <div id="timeline-list" class="notes-list timeline">
                                    <!-- Timeline entries -->
                                </div>
                            </div>
                        </div>

                        <hr class="collapsible-divider">

                        <!-- Separate Post-it Section -->
                        <div class="collapsible-section" id="section-postits">
                            <div class="collapsible-header" id="header-postits">
                                <h3 style="color: var(--warning); margin: 0;">
                                    <i class="fa-solid fa-note-sticky"></i> ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡πÇ‡∏ô‡πâ‡∏ï (Post-it)
                                </h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="collapsible-content">
                                <div class="add-note-box">
                                    <textarea id="postit-input"
                                        placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡πà‡∏≠ / ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥..."></textarea>
                                    <div
                                        style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem;">
                                        <div>
                                            <input type="file" id="inp-postit-file" style="display: none;"
                                                accept="image/*,application/pdf">
                                            <button id="btn-attach-postit" class="btn btn-outline btn-sm"
                                                title="‡πÅ‡∏ô‡∏ö‡πÑ‡∏ü‡∏•‡πå (‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û/PDF)">
                                                <i class="fa-solid fa-paperclip"></i>
                                            </button>
                                            <span id="postit-file-name"
                                                style="font-size: 0.8rem; color: var(--text-muted); margin-left: 0.5rem;"></span>
                                        </div>
                                        <button id="btn-add-postit" class="btn btn-warning btn-sm"
                                            style="color: white; background-color: #f59e0b;">
                                            <i class="fa-solid fa-thumbtack"></i> ‡πÅ‡∏õ‡∏∞‡πÇ‡∏ô‡πâ‡∏ï
                                        </button>
                                    </div>
                                </div>
                                <div id="postits-list" class="notes-list grid">
                                    <!-- Post-it entries -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal for New Project -->
    <div id="modal-create" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="form-create-project">
                    <div class="form-group">
                        <label>‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ <span class="required">*</span></label>
                        <input type="text" id="inp-project-name" required placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå">
                    </div>
                    <div class="form-group">
                        <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
                        <textarea id="inp-project-desc" rows="3" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (‡∏ö‡∏≤‡∏ó)</label>
                            <input type="text" id="inp-project-budget" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏ç‡∏ç‡∏≤ (‡∏ö‡∏≤‡∏ó)</label>
                            <input type="text" id="inp-project-contract" placeholder="0.00">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏´‡∏≤</label>
                            <select id="inp-project-type">
                                <option value="buy">‡∏ã‡∏∑‡πâ‡∏≠</option>
                                <option value="hire">‡∏à‡πâ‡∏≤‡∏á</option>
                                <option value="rent">‡πÄ‡∏ä‡πà‡∏≤</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏´‡∏≤</label>
                            <select id="inp-project-method">
                                <option value="e-bidding">e-bidding</option>
                                <option value="specific">‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡∏≤‡∏∞‡∏à‡∏á</option>
                                <option value="selection">‡∏Ñ‡∏±‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô</label>
                            <select id="inp-project-priority">
                                <option value="normal">‡∏õ‡∏Å‡∏ï‡∏¥</option>
                                <option value="urgent">‡∏î‡πà‡∏ß‡∏ô</option>
                                <option value="very-urgent">‡∏î‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏Å</option>
                                <option value="most-urgent">‡∏î‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</option>
                                <option value="extreme">‡∏î‡πà‡∏ß‡∏ô‡∏ä‡∏¥‡∏ö‡∏´‡∏≤‡∏¢</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à (Deadline)</label>
                        <input type="date" id="inp-project-deadline">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-text close-modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                        <button type="submit" class="btn btn-primary">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal for Edit Project Info -->
    <div id="modal-edit-project" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="form-edit-project">
                    <input type="hidden" id="edit-project-id">
                    <div class="form-group">
                        <label>‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ <span class="required">*</span></label>
                        <input type="text" id="edit-project-name" required>
                    </div>
                    <div class="form-group">
                        <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
                        <textarea id="edit-project-desc" rows="3"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (‡∏ö‡∏≤‡∏ó)</label>
                            <input type="text" id="edit-project-budget">
                        </div>
                        <div class="form-group">
                            <label>‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏ç‡∏ç‡∏≤ (‡∏ö‡∏≤‡∏ó)</label>
                            <input type="text" id="edit-project-contract">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏´‡∏≤</label>
                            <select id="edit-project-type">
                                <option value="buy">‡∏ã‡∏∑‡πâ‡∏≠</option>
                                <option value="hire">‡∏à‡πâ‡∏≤‡∏á</option>
                                <option value="rent">‡πÄ‡∏ä‡πà‡∏≤</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏´‡∏≤</label>
                            <select id="edit-project-method">
                                <option value="e-bidding">e-bidding</option>
                                <option value="specific">‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡∏≤‡∏∞‡∏à‡∏á</option>
                                <option value="selection">‡∏Ñ‡∏±‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô</label>
                            <select id="edit-project-priority">
                                <option value="normal">‡∏õ‡∏Å‡∏ï‡∏¥</option>
                                <option value="urgent">‡∏î‡πà‡∏ß‡∏ô</option>
                                <option value="very-urgent">‡∏î‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏Å</option>
                                <option value="most-urgent">‡∏î‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</option>
                                <option value="extreme">‡∏î‡πà‡∏ß‡∏ô‡∏ä‡∏¥‡∏ö‡∏´‡∏≤‡∏¢</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à (Deadline)</label>
                        <input type="date" id="edit-project-deadline">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-text close-modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                        <button type="submit" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Access Code Modal -->
    <div id="modal-access-code" class="modal" style="z-index: 999;">
        <div class="modal-content" style="max-width: 400px; text-align: center;">
            <div class="modal-body" style="padding: 2rem;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üîê</div>
                <h2 style="margin-bottom: 0.5rem;">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</h2>
                <p style="color: var(--text-muted); margin-bottom: 1.5rem;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™ Access Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                </p>

                <form id="form-access-code">
                    <div class="form-group">
                        <input type="text" id="inp-access-code"
                            placeholder="‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏î‡∏¥‡∏° (‡πÄ‡∏ä‡πà‡∏ô myteam2024)" required
                            style="text-align: center; letter-spacing: 1px; font-size: 1.1rem;">
                    </div>
                    <button type="submit" class="btn btn-primary full-width">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
                </form>

                <div id="migration-option"
                    style="margin-top: 1.5rem; display: none; border-top: 1px solid var(--border-color); padding-top: 1rem;">
                    <p style="font-size: 0.9rem; color: var(--warning); margin-bottom: 0.5rem;">
                        <i class="fa-solid fa-cloud-upload"></i> ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ
                    </p>
                    <button id="btn-migrate" class="btn btn-outline full-width btn-sm">
                        ‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏µ‡πâ + ‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏∂‡πâ‡∏ô Cloud
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="modal-settings" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô (Workflow Steps)</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <p class="text-muted" style="margin-bottom: 0;">
                        ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠/‡πÄ‡∏ä‡πá‡∏Å‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏∏‡∏Å‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô
                        ‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏ö‡∏à‡∏∞‡∏°‡∏µ‡∏ú‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>
                    <button type="button" class="btn btn-outline btn-sm" id="btn-add-step-template">
                        <i class="fa-solid fa-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô
                    </button>
                </div>
                <div id="settings-steps-container" style="max-height: 400px; overflow-y: auto; padding-right: 0.5rem;">
                    <!-- Steps will be injected here -->
                </div>
                <div class="form-actions"
                    style="border-top: 1px solid var(--border-color); padding-top: 1rem; margin-top: 1rem;">
                    <button type="button" class="btn btn-outline" id="btn-reset-steps">‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</button>
                    <button type="button" class="btn btn-primary" id="btn-save-settings">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Step Modal (Sub-modal) -->
    <div id="modal-edit-step" class="modal" style="z-index: 1100;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</h3>
                <span class="close-modal-step">&times;</span>
            </div>
            <div class="modal-body">
                <input type="hidden" id="edit-step-id">
                <div class="form-group">
                    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</label>
                    <input type="text" id="edit-step-title">
                </div>
                <div class="form-group">
                    <label>Checklist ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà)</label>
                    <textarea id="edit-step-checklist" rows="5"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-text close-modal-step">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="button" class="btn btn-primary" id="btn-confirm-step-edit">‡∏ï‡∏Å‡∏•‡∏á</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Step Completion -->
    <div id="modal-step-complete" class="modal" style="z-index: 1100;">
        <div class="modal-content" style="max-width: 450px;">
            <div class="modal-header">
                <h2><i class="fa-regular fa-circle-check" style="color: var(--primary);"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
                </h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <p id="step-complete-label" style="color: var(--text-muted); margin-bottom: 1rem;"></p>
                <div class="form-group">
                    <label>‡πÄ‡∏•‡∏Ç‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                    <div id="doc-number-prefix-row"
                        style="display: flex; align-items: center; gap: 0; margin-bottom: 6px;">
                        <input type="text" id="inp-step-doc-prefix" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏¢‡∏ò 1101.06/"
                            style="border-radius: 8px 0 0 8px; border-right: none; flex: 1; min-width: 0;">
                        <input type="text" id="inp-step-doc-suffix" placeholder="‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà"
                            style="border-radius: 0 8px 8px 0; width: 100px; text-align: center;">
                    </div>
                    <div style="font-size: 0.75rem; color: var(--text-muted);">
                        <i class="fa-solid fa-info-circle"></i> ‡∏ï‡∏±‡πâ‡∏á prefix ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏à‡∏≥‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
                    </div>
                </div>
                <div class="form-group">
                    <label>‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                    <div class="date-input-wrapper" style="position: relative; width: 100%;">
                        <input type="text" id="inp-step-doc-date" placeholder="DD/MM/YYYY" maxlength="10"
                            style="padding-right: 35px; width: 100%; box-sizing: border-box;">
                        <i class="fa-solid fa-calendar-days"
                            style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: var(--text-muted); pointer-events: none; z-index: 10;"></i>
                    </div>
                </div>
                <div class="form-group">
                    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à/‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</label>
                    <div class="date-input-wrapper" style="position: relative; width: 100%;">
                        <input type="text" id="inp-step-complete-date" placeholder="DD/MM/YYYY" maxlength="10"
                            style="padding-right: 35px; width: 100%; box-sizing: border-box;">
                        <i class="fa-solid fa-calendar-days"
                            style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: var(--text-muted); pointer-events: none; z-index: 10;"></i>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-text close-modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="button" class="btn btn-outline" id="btn-save-draft-step">
                        <i class="fa-solid fa-save"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
                    </button>
                    <button type="button" class="btn btn-primary" id="btn-confirm-step-complete">
                        <i class="fa-solid fa-check"></i> ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="toast-container"></div>

    <!-- Lightbox Overlay -->
    <div id="lightbox-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 9999; justify-content: center; align-items: center; flex-direction: column;">
        <button id="lightbox-close"
            style="position: absolute; top: 20px; right: 20px; background: none; border: none; color: white; font-size: 2rem; cursor: pointer;">&times;</button>
        <img id="lightbox-img" src="" style="max-width: 90%; max-height: 90%; object-fit: contain;">
        <div id="lightbox-caption" style="color: white; margin-top: 1rem; font-size: 1rem;"></div>
    </div>
    <script type="module" src="app.js"></script>
</body>

</html>